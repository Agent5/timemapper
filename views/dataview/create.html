{% extends "base.html" %}

{% block bodyclass %}create{% endblock %}

{% block content %}
<div class="page-header">
  <h1>
    Create your Time<span class="brand-ext">Map</span>
  </h1>
</div>

<div class="overview">
  <h2>It's as easy as 1-2-3!</h2>
  <div class="row">
    <div class="span4">
      <div class="well">
        <h3>1. Create a Spreadsheet</h3>
        <p>Add your dates and places to a Google Spreadsheet.</p>
      </div>
    </div>
    <div class="span4">
      <div class="well">
        <h3>2. Connect and Customize</h2>
        <p>Connect your spreadsheet with TimeMapper and customize the results.</p>
      </div>
    </div>
    <div class="span4">
      <div class="well">
        <h3>3. Publish, Embed and Share</h3>
        <p>Publish your TimeMap at your own personal url, then share or embed on your site.</p>
      </div>
    </div>
  </div>
</div>

<hr />

<div class="instructions">

<h2>Let's Get Started &hellip;</h2>
<div id="create" class="row">
  <div class="span8 offset2"><div class="well">
    <h3>
      1. Create your Spreadsheet
      <br />
      <small>(if you don't have one already!)</small>
    </h3>

    <div class="row">
      <div class="span6 offset1">
        <p>Get started by copying <strong><a href="https://docs.google.com/a/okfn.org/spreadsheet/ccc?key=0AqR8dXc6Ji4JdFRNOTVYYTRqTmh6TUNNd3U2X2pKMGc#gid=0">this template</a></strong>. For more details or help with problems check out the <a href="#faq">FAQ below</a>.</p>

        <div class="alert alert-success" style="margin-top: 30px;">
          Impatient to try this out but don't have a spreadsheet yet?<br />
        <a href="#" class="js-demo-sheet" data-url="https://docs.google.com/spreadsheet/ccc?key=0Al6mO9_3Hr2PdGZnRjEwUWxOekhreTNNZEFEMWRZbkE"
          >
          Click here to use a pre-prepared example &raquo;</a>
        </div>
      </div>
    </div>
  </div></div>
</div>

<div id="connect" class="row js-connect">
  <div class="span8 offset2">
    <div class="well">
      <h3>
        2. Connect and Customize
      </h3>
      {% if not currentUser %}
      <div class="alert alert-warning">
        Just letting you know you are <strong>not signed in</strong>. That means the timemap will be created anonymously. That is <strong>no problem</strong> and if you are happy with that you can forge ahead! If you do want to "own" your timemap more formally you should <a href="/account/login">signin right now</a> (or <a href="/account/login">signup</a> - it takes just 15 seconds using your twitter account). <a href="#faq-anon">Read more about anonymous vs non-anonymous creation &raquo;</a>
      </div>
      {% endif %}

      <form class="js-load-url form-horizontal" action="" method="GET">
        {% include 'dataview/form.html' %}

        <h3>
          3. Let's Publish It!
        </h3>
        <div class="control-group">
          <div class="controls">
            <button type="submit" class="btn btn-primary js-submit">Publish &raquo;</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

</div> <!-- /instructions -->

<hr />

<div id="faq" class="faq">
  <h2>FAQ</h2>
  <h3 id="faq-anon">Can I make a timemap anonymously?</h3>
  <p>Yes! You do not need an account to create a timemap - they can be created anonymously and will have all the same features and shareability of normal timemaps. However, there are some benefits of creating an account and creating your timemap whilst logged in:</p>
  <ul>
    <li>You'll get a nice URL for your timemap at <code>/your-username/a-name-you-choose-for-your-timemap</code></li>
    <li>All of your timemaps will be nicely listed at <code>/your-username</code></li>
    <li>As you'll be identified as the owner you'll be able to re-configure (or delete) your timemap later</li>
  </ul>

  <p>If you do want an account, signup is very easy &ndash; <a href="/account/login">it takes just 15 seconds, is very secure, and uses your Twitter account</a> (no need to think up a new username and password!).</p>

  <h3>What URL do I use to connect my spreadsheet?</h3>
  <p>Use the URL you get by clicking your spreadsheet's <strong>Share</strong> button and copying the <strong>Link to share</strong> box.</p>

  <p>Note that although you must also <strong>Publish to the web</strong>, TimeMapper does not use the URL found in the publication pop-up.</p>
  
  <p>Watch <a href="http://www.youtube.com/watch?v=Lzd-PcqO5hM">this one-minute tutorial video</a> to see how it's done.</p>

  <h3>What structure must the spreadsheet have?</h3>
  <p>TimeMapper recognizes certain columns with specific names. The best overview of these columns is <a href="https://docs.google.com/a/okfn.org/spreadsheet/ccc?key=0AqR8dXc6Ji4JdFRNOTVYYTRqTmh6TUNNd3U2X2pKMGc#gid=0">the template</a>, which has rows of instructions and examples.</p>

  <p>Not all fields are required. The only required fields are <b>Title</b> and <b>Start</b> fields, and even <b>Start</b> can be omitted if you just want a map. Note that you can add any number of other columns beyond those that TimeMapper uses.</p>

  <h3>How do I format dates?</h3>
  <p>The preferred date format is ISO 8601 (YYYY-MM-DD), but TimeMapper recognizes most types of date.</p>

  <p>If a date's month and day are ambiguous (e.g. is 08-03-1798 UK notation for 8 March, or is it US notation for 3 August?), by default, the first number will be interpreted as the month. You can change this by clicking the <b>edit</b> button in the top right corner of your TimeMap's display and selecting between US- and non-US-style dates.</p>

  <h3>What kinds of geodata are supported?</h3>
  <p>The <b>Location</b> column accepts two types of geodata: latitude-longitude coordinates or GeoJSON objects.</p>
  
  <p>Coordinates must be in the format <emph>lat, long</emph> (e.g. <emph>37.5, -122</emph>). The <a href="https://docs.google.com/a/okfn.org/spreadsheet/ccc?key=0AqR8dXc6Ji4JdFRNOTVYYTRqTmh6TUNNd3U2X2pKMGc#gid=0">spreadsheet template</a> includes a formula which automatically looks up coordinates corresponding to human-readable place names in the <b>Place</b> column. This formula is explained in a School of <a href="http://schoolofdata.org/2013/02/19/geocoding-part-ii-geocoding-data-in-a-google-docs-spreadsheet/">Data blog post</a>.</p>

  <p>Advanced users who want to go beyond simple coordinates can use GeoJSON feature objects. For an example, see this blog post on adding <a href="http://schoolofdata.org/2013/10/31/geocoding-geojson-boundaries-koordinates/">GeoJSON country boundaries</a> to spreadsheets.</p>  

</div>

{% endblock %}

{% block extrabody %}
  <script type="text/javascript" src="http://okfnlabs.org/recline.backend.gdocs/backend.gdocs.js"></script>

  <script src="http://www.google.com/jsapi"></script>
  <script type="text/javascript">
    // setup gdocs file picker
    google.load('picker', '1');
  </script>

  <!-- non-library javascript specific to this demo -->
  <script type="text/javascript" src="js/create.js"></script>
{% endblock %}
